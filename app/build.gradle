apply plugin: 'com.android.application'
apply plugin: 'aspect'

apply from: '../config.gradle'

android {
    compileSdkVersion 28
    defaultConfig {
        applicationId "com.pds.blog"
        minSdkVersion 19
        targetSdkVersion 28
        versionCode 1
        versionName "1.0"

        multiDexEnabled true


        javaCompileOptions{
            annotationProcessorOptions{
                includeCompileClasspath = true
            }
        }
        // ndk
        externalNativeBuild{
            cmake{
                cppFlags "-frtti -fexceptions"
            }
        }

        ndk{
            moduleName "app"
            abiFilters "armeabi","x86" //指定平台
            cFlags "-DANDROID_NDK"
        }


//        //指定jdk版本
        compileOptions {
            sourceCompatibility JavaVersion.VERSION_1_8
            targetCompatibility JavaVersion.VERSION_1_8
        }



        defaultConfig {
            //只支持中文
            resConfigs "zh"

        }
    }

    sourceSets {
        main {
            jniLibs.srcDirs = ['libs']
        }
    }

    externalNativeBuild {
        cmake {
            path "CMakeLists.txt"
        }
    }

    buildTypes {
        debug{

        }

        releaseWithLog {
            splitsEnabled = true
        }
        release.initWith(releaseWithLog)
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

//    splits{
//        abi{
//            enable !project.hasProperty('dbgBld')
//            reset()
//            include 'armeabi', 'armeabi-v7a', 'x86', 'mips'
//            ext.splitsEnabled true
//        }
//    }

//    dexOptions {
//        preDexLibraries = false
//        additionalParameters=['--core-library']
//    }

}

repositories {
    flatDir{
        dirs 'libs'
    }
}

dependencies {
    implementation 'com.android.support:appcompat-v7:28.0.0'
    implementation 'com.android.support.constraint:constraint-layout:1.1.3'
    implementation 'com.android.support:multidex:1.0.3'

    compile(name: 'aspect-runtime-1.0.0', ext: 'aar')
}